<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minimal Countdown Timer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Circle animation */
    .circle-progress {
      transform: rotate(-90deg);
      transition: stroke-dashoffset 0.1s linear;
    }

    /* Remove number input arrows */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }

    /* Smooth transitions */
    * {
      transition: all 0.2s ease;
    }

    /* Theme colors */
    :root {
      --bg: #f9fafb;
      --text: #111827;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f172a;
        --text: #f8fafc;
      }
    }

    body {
      background-color: var(--bg);
      color: var(--text);
    }

    :fullscreen {
      background: var(--bg);
    }
  </style>
</head>
<body class="flex min-h-screen items-center justify-center font-sans">
  <div class="w-full max-w-2xl px-6 py-8 rounded-3xl shadow-lg bg-white/80 dark:bg-gray-900/70 backdrop-blur-lg border border-gray-200 dark:border-gray-700 text-center">

    <!-- Title -->
    <h1 class="text-3xl md:text-4xl font-semibold mb-8">Countdown Timer</h1>

    <!-- Timer Display -->
    <div class="relative flex flex-col justify-center items-center mb-8">
      <div class="relative flex justify-center items-center">
        <svg class="absolute w-80 h-80 pointer-events-none -z-10 opacity-40" viewBox="0 0 200 200">
          <circle
            cx="100"
            cy="100"
            r="90"
            stroke="currentColor"
            stroke-width="2"
            fill="none"
            class="text-gray-200 dark:text-gray-700"
          />
          <circle
            id="progressCircle"
            cx="100"
            cy="100"
            r="90"
            stroke="currentColor"
            stroke-width="4"
            fill="none"
            class="circle-progress text-blue-500"
            stroke-dasharray="565.48"
            stroke-dashoffset="565.48"
            stroke-linecap="round"
          />
        </svg>
        <div class="relative z-10 text-center">
          <div id="display" class="text-6xl md:text-7xl font-mono font-light tabular-nums">
            00:00:00.000
          </div>
        </div>
      </div>
    </div>

    <!-- Time Input -->
    <div id="timeInput" class="flex justify-center gap-4 mb-8">
      <div class="flex items-center gap-2">
        <input id="hours" type="number" min="0" max="99" value="0"
          class="w-16 text-2xl text-center bg-transparent border-b-2 border-gray-300 dark:border-gray-600 focus:border-blue-500 outline-none">
        <span class="text-lg font-light">h</span>
      </div>
      <div class="flex items-center gap-2">
        <input id="minutes" type="number" min="0" max="59" value="1"
          class="w-16 text-2xl text-center bg-transparent border-b-2 border-gray-300 dark:border-gray-600 focus:border-blue-500 outline-none">
        <span class="text-lg font-light">m</span>
      </div>
      <div class="flex items-center gap-2">
        <input id="seconds" type="number" min="0" max="59" value="0"
          class="w-16 text-2xl text-center bg-transparent border-b-2 border-gray-300 dark:border-gray-600 focus:border-blue-500 outline-none">
        <span class="text-lg font-light">s</span>
      </div>
    </div>

    <!-- Control Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <button id="startBtn" class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium shadow-sm">
        ▶ Start
      </button>
      <button id="pauseBtn" class="hidden px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl font-medium shadow-sm">
        ⏸ Pause
      </button>
      <button id="resumeBtn" class="hidden px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium shadow-sm">
        ▶ Resume
      </button>
      <button id="resetBtn" class="px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-medium shadow-sm">
        ↺ Reset
      </button>
      <button id="fullscreenBtn" class="px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-medium shadow-sm">
        ⛶ Fullscreen
      </button>
    </div>

    <!-- Keyboard Help -->
    <div class="text-center text-xs text-gray-500 dark:text-gray-400">
      <p><span class="font-medium">Space</span> = Start / Pause / Resume |
      <span class="font-medium">R</span> = Reset |
      <span class="font-medium">F</span> = Fullscreen</p>
    </div>
  </div>

  <!-- Alarm Sound -->
  <audio id="alarmSound" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBin+8Oy9Uy0OMpba6bruKBQwjtvj0NHIuuLt0LHIuLvsvHV8eJB6g359hIR+e3dvWmhhdWdWVWRVWEpMSVdaV1RQU0xFRUZEU0pEQkRCRkNAP0FFSEVNRkdJUk1STFdQUVFUWVVWYVxgYmRhZGNkaXJzeHh3fHx5fIGBfXh+j4aDfYqFhIaJgIeHg4uLg4mTkYuTlJGTnJSVlJmMmZealZ2fjpOhlYmRkp6OhaKYop2OpaOdnqavp62xpbKy" type="audio/wav">
  </audio>

  <script>
    // Countdown timer only
    let isRunning = false;
    let isPaused = false;
    let startTime = 0;
    let elapsedTime = 0;
    let totalTime = 0;
    let interval = null;

    const display = document.getElementById('display');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resumeBtn = document.getElementById('resumeBtn');
    const resetBtn = document.getElementById('resetBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const hoursInput = document.getElementById('hours');
    const minutesInput = document.getElementById('minutes');
    const secondsInput = document.getElementById('seconds');
    const progressCircle = document.getElementById('progressCircle');
    const alarmSound = document.getElementById('alarmSound');

    function formatTime(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const hours = Math.floor(totalSeconds / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;
      const milliseconds = ms % 1000;
      return `${hours.toString().padStart(2, '0')}:${minutes
        .toString()
        .padStart(2, '0')}:${seconds
        .toString()
        .padStart(2, '0')}.${milliseconds.toString().padStart(3, '0')}`;
    }

    function updateDisplay() {
      const remaining = Math.max(0, totalTime - elapsedTime);
      display.textContent = formatTime(remaining);
      const progress = totalTime > 0 ? elapsedTime / totalTime : 0;
      const circumference = 565.48;
      progressCircle.style.strokeDashoffset = circumference * (1 - progress);

      if (remaining === 0 && isRunning) {
        stop();
        alarmSound.play();
        display.classList.add('animate-pulse');
        setTimeout(() => display.classList.remove('animate-pulse'), 3000);
      }
    }

    function start() {
      const h = +hoursInput.value || 0;
      const m = +minutesInput.value || 0;
      const s = +secondsInput.value || 0;
      totalTime = (h * 3600 + m * 60 + s) * 1000;
      if (totalTime === 0) return alert('Please set a time.');

      isRunning = true;
      isPaused = false;
      startTime = Date.now() - elapsedTime;

      interval = setInterval(() => {
        elapsedTime = Date.now() - startTime;
        updateDisplay();
      }, 10);

      startBtn.classList.add('hidden');
      pauseBtn.classList.remove('hidden');
      document.getElementById('timeInput').classList.add('opacity-50', 'pointer-events-none');
    }

    function pause() {
      isRunning = false;
      isPaused = true;
      clearInterval(interval);
      pauseBtn.classList.add('hidden');
      resumeBtn.classList.remove('hidden');
    }

    function resume() {
      isRunning = true;
      isPaused = false;
      startTime = Date.now() - elapsedTime;
      interval = setInterval(() => {
        elapsedTime = Date.now() - startTime;
        updateDisplay();
      }, 10);
      resumeBtn.classList.add('hidden');
      pauseBtn.classList.remove('hidden');
    }

    function stop() {
      isRunning = false;
      isPaused = false;
      clearInterval(interval);
      pauseBtn.classList.add('hidden');
      resumeBtn.classList.add('hidden');
      startBtn.classList.remove('hidden');
    }

    function reset() {
      stop();
      elapsedTime = 0;
      updateDisplay();
      progressCircle.style.strokeDashoffset = '565.48';
      document.getElementById('timeInput').classList.remove('opacity-50', 'pointer-events-none');
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    }

    startBtn.onclick = start;
    pauseBtn.onclick = pause;
    resumeBtn.onclick = resume;
    resetBtn.onclick = reset;
    fullscreenBtn.onclick = toggleFullscreen;

    document.addEventListener('keydown', e => {
      if (e.code === 'Space') {
        e.preventDefault();
        if (!isRunning && !isPaused) start();
        else if (isRunning) pause();
        else resume();
      } else if (e.key.toLowerCase() === 'r') reset();
      else if (e.key.toLowerCase() === 'f') toggleFullscreen();
    });

    [hoursInput, minutesInput, secondsInput].forEach((input, i) => {
      const limits = [99, 59, 59];
      input.addEventListener('input', e => {
        const max = limits[i];
        e.target.value = Math.max(0, Math.min(max, e.target.value));
      });
    });

    updateDisplay();
  </script>
</body>
</html>
